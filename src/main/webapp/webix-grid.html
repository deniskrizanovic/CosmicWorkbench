<!DOCTYPE html>
<html lang="en">
<head>
    <title>Funky Funky Grid</title>
    <link rel="stylesheet" href="resources/js/codebase/webix.css" type="text/css" charset="utf-8">
    <script src="resources/js/codebase/webix.js" type="text/javascript" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="resources/css/webix-samples.css">
</head>


<body>

<div id="testA"></div>
<input type='button' class="sample_button" value='add datagroup' onclick='add_column()'>
<input type='button' class="sample_button" value='add step' onclick='add_row()'>
<input type='button' class="sample_button" value='show me the grid' onclick='show_grid()'>

<div id="mutliselect" class='sample_comment'></div>
<div id="gridnow" class='sample_comment'></div>


<script type="text/javascript" charset="utf-8">

	webix.ready(function(){
			grid = webix.ui({
				container:"testA",
				view:"datatable",
				columns:[
					{ id:"fp",	editor:"text", header:"FuncProcess1"},
					{ id:"dg1",	editor:"select", header:"Data Group 1", options:["E", "X", "R", "W", ""], css:"centre", width:200 },
					{ id:"dg2",	editor:"select", header:"Data Group 2" , options:["E", "X", "R", "W", ""], css:"centre", width:200},
					{ id:"dg3",	editor:"select", header:"Data Group 3", options:["E", "X", "R", "W", ""], css:"centre", width:200}
				],
				data: [
					{ id:1, fp:"step1", dg1:"-", dg2:"E", dg3:"-"},
					{ id:2, fp:"step2", dg1:"E", dg2:"-", dg3:"-"}
				],


				editable:true,
				autoheight:true,
				autowidth:true,
				select:"cell",
				multiselect:true,
				editaction:"dblclick",
				dragColumn:"order",
				drag:"order",

				on:{
					onSelectChange:function(){
					    var text = grid.getSelectedId(true, true);
						//var text = "Selected: "+grida.getSelectedId(true).join();
						document.getElementById('mutliselect').innerHTML = text;
					}
				}

			});
		});


		function add_column(){
			var columns = webix.toArray(grid.config.columns);
			columns.insertAt({
				id:"c"+webix.uid(),
				header:"New DataGroup",
				width:200
			},2);
			grid.refreshColumns();
		}

		function add_row() {

           var rows = grid.count();
           grid.add({
            fp:"step3",
            dg1:"-",
            dg2:"-",
            dg3:"-"
           });

		}

		function show_grid() {

            document.getElementById('gridnow').innerHTML = "";
		    grid.eachRow(
		        function(row){


                     var record = grid.getItem(row);
                     var text = record.fp + ":" + record.dg1 + ":" + record.dg2 + ":"  + record.dg3 + "<p>";
		             document.getElementById('gridnow').innerHTML += text;
		        }


            )
		}



</script>

</body>
</html>